# 🎯 **議題定義書: ルートファイル整理ルール策定**

**作成日**: 2025-08-21  
**議題**: プロジェクトテンプレートのルートファイル散乱問題の根本的解決  
**対象**: CREATE/CHANGE/VIEW/PROTECT構造を活用した整理ルール策定

---

## 📖 **背景 - なぜこの議題が必要になったのか**

### **根本的な問題**
現在のプロジェクトテンプレートは、**4つのメインフォルダ構造**（CREATE/CHANGE/VIEW/PROTECT）を新たに導入したにも関わらず、**ルート直下に22個のファイルが散乱**しており、新構造の恩恵を全く受けられていない状態です。

### **問題の発生経緯**
1. **2025年8月初旬**: 旧来のフラット構造（docs/, tests/, core/等）でプロジェクト運用
2. **2025年8月中旬**: 直感的理解を目的とした4フォルダ構造を設計・導入
3. **2025年8月21日現在**: メインフォルダ移行完了も、ルートファイル整理未実施
4. **今回**: ルートファイルの適切な配置ルールが不明確で整理が停滞

### **この問題を放置することの影響**
- **新規参加者の混乱**: フォルダ構造の意味が理解できない
- **開発効率の低下**: ファイル検索に無駄な時間が発生
- **保守性の悪化**: 新ファイル追加時の配置判断に迷いが生じる
- **構造設計の無意味化**: せっかくの4フォルダ構造が機能しない

---

## 🔍 **現状 - 今何に困っているのか**

### **ルート散乱ファイルの詳細分析**

#### **📄 ドキュメント系ファイル（4個）**
```
README.md                           - 4,234文字 - プロジェクト概要
E2E_TEST_AUTOMATION_MANUAL.md      - 8,847文字 - テスト手順詳細
UNIVERSAL_FOLDER_STRUCTURE_GUIDE.md - 3,127文字 - 今回設計のフォルダガイド
LICENSE                             - 1,063文字 - MIT License
```
**問題点**: どれもVIEW配置候補だが、重要度・用途の差で配置先が悩ましい

#### **⚙️ 設定ファイル群（9個）**
```
package.json          - Node.js依存関係定義（129行）
package-lock.json     - 依存関係ロック（17,847行）
tsconfig.json         - TypeScript設定（プロジェクト用）
tsconfig.base.json    - TypeScript基本設定（共通用）
vite.config.ts        - Viteビルド設定（84行）
vitest.config.ts      - Vitestテスト設定（22行）
playwright.config.ts  - Playwrightテスト設定（97行）
knip.json            - 未使用コード検出設定（41行）
project-settings.json - プロジェクト固有設定（156行）
```
**問題点**: CHANGE配置が有力だが、サブフォルダ構造が未定義

#### **🖼️ アセット系ファイル（4個）**
```
icon-180.png    - 18KB PWAアイコン（180×180）
icon-192.png    - 21KB PWAアイコン（192×192） 
icon-512.png    - 47KB PWAアイコン（512×512）
manifest.json   - PWAマニフェスト（394文字）
```
**問題点**: CREATE配置が有力だが、assetsサブフォルダ作成が必要

#### **🌐 アプリケーションファイル（1個）**
```
index.html - メインHTMLファイル（2,847文字）
```
**問題点**: CREATE配置が有力だが、app/web/配下が適切か要検討

#### **📊 その他管理ファイル（4個）**
```
profiles.json                    - 187文字 - プロファイル設定
version.json                     - 89文字  - バージョン情報
work_history_DESKTOP-BP6C297.log - 45KB    - デバイス固有ログ（gitignore対象）
local-notes.txt                  - 623文字 - デバイス固有メモ（gitignore対象）
```
**問題点**: 用途・重要度・配置先が最も曖昧

### **具体的な困りごと**

#### **🚨 緊急度高：開発者の混乱**
- 新しいファイルを作成する際、どこに配置すべきか判断に30秒～2分かかる
- tsconfig.jsonとtsconfig.base.jsonの違いと配置理由が不明
- アイコンファイルの管理場所が不明確（CREATEなのかPROTECTなのか）

#### **🔄 保守性の問題**
- package.jsonを編集した際、関連ファイルがどこにあるか分からない
- 設定変更時に影響範囲が把握しづらい
- gitignore対象ファイルの判別が困難

#### **📈 拡張性の制約**
- 新しいビルドツール追加時の設定ファイル配置ルールが未定義
- 多言語対応時のアセットファイル管理方針が不明
- デバイス別設定ファイルの増加への対応方針が未確立

---

## 🎯 **影響範囲**

### **直接影響**
- **開発者体験**: ファイル検索・編集効率に直接影響
- **新規参入障壁**: プロジェクト理解に余計な時間が必要
- **CI/CD**: ビルド・テスト設定の保守性に影響

### **間接影響**  
- **プロジェクト品質**: 整理されていない構造による潜在的品質リスク
- **ドキュメント**: 構造説明の一貫性に影響
- **拡張計画**: 将来的な機能追加時の設計判断に影響

---

## ⚠️ **制約条件**

### **🔒 絶対に守るべき制約**
1. **既存4フォルダ構造の維持**: CREATE/CHANGE/VIEW/PROTECT構造は変更不可
2. **git履歴保持**: ファイル移動はgit mvで実施（履歴保持必須）
3. **ビルド継続性**: 移動後もnpm run build、npm testが正常動作必須
4. **設定ファイル連携**: tsconfig.json等の相互参照関係を維持

### **🎯 設計思想の制約**
1. **直感的理解**: フォルダ名で用途が1秒で理解可能
2. **包摂性**: 経験レベルに関係なく理解可能な配置
3. **保守性**: 長期間の運用に耐える構造
4. **拡張性**: 将来的な機能追加に対応可能

### **⚡ 技術的制約**
1. **パス依存性**: import/export文の相対パス更新が必要
2. **設定ファイル参照**: vite.config.ts等でのファイル参照パス更新必須
3. **IDE設定**: tsconfig.jsonのパス設定更新必須
4. **デプロイ設定**: GitHub Pages等のデプロイ設定への影響考慮

---

## 🎯 **成功基準**

### **定量的成功基準**
1. **ルート空化**: 設定ファイル以外、ルート直下ファイル5個以下
2. **検索効率**: 目的ファイルへ3クリック以内でアクセス可能
3. **判断速度**: 新ファイル配置判断を5秒以内で完了
4. **ビルド時間**: 整理後もビルド時間の劣化なし

### **定性的成功基準**
1. **直感性**: フォルダ名で用途が即座に理解可能
2. **一貫性**: 類似ファイルが同じルールで配置されている
3. **発見性**: 必要なファイルが迷わず見つかる
4. **説明性**: 配置理由を30秒で説明可能

---

## 📚 **考慮すべき材料・データ**

### **既存設計資料**
1. **UNIVERSAL_FOLDER_STRUCTURE_GUIDE.md** - 4フォルダ構造の設計思想
2. **DISCUSSION_FOLDER_RULES.md** - 議論プロセスのルール
3. **既存の類似プロジェクト** - 他のテンプレートでの配置パターン

### **技術的考慮事項**
1. **TypeScript設定の階層関係**: base→プロジェクト設定の依存関係
2. **Vite設定の参照先**: 相対パスでの設定ファイル参照
3. **package.json位置制約**: Node.jsプロジェクトルート必須（移動不可能性）
4. **PWA要件**: manifest.json、アイコンファイルの配置制約

### **ユーザビリティデータ**
1. **新規開発者のつまずきポイント**: 過去の質問・相談事例
2. **ファイル検索パターン**: よくアクセスするファイルの組み合わせ
3. **編集頻度**: 各ファイルの変更頻度データ（設定変更 vs 開発作業）

### **将来拡張予定**
1. **多言語対応**: i18nファイルの配置方針
2. **テストツール追加**: Jest、Cypress等の追加設定ファイル
3. **デプロイツール**: Docker、k8s設定ファイルの配置
4. **モニタリング**: ログ、メトリクス設定ファイルの配置

---

## 🔗 **関連資料**

### **現状分析資料**
- `CURRENT_ROOT_ANALYSIS.md` - 現在のルートファイル22個の詳細分析
- `CLASSIFICATION_RULES.md` - 暫定分類案（要エージェント検討）

### **設計思想資料**
- `UNIVERSAL_FOLDER_STRUCTURE_GUIDE.md` - 4フォルダ構造の基本理念
- `DISCUSSION_PROCESS_MANUAL_V2.md` - 今回の議論プロセス

### **技術制約資料**
- `tsconfig.base.json` - TypeScript設定の現在の構造
- `vite.config.ts` - ビルド設定の現在のパス参照
- `package.json` - プロジェクト依存関係の現状

---

## 🎯 **エージェントへの期待**

### **求める提案内容**
1. **具体的配置ルール**: 22個各ファイルの明確な配置先
2. **サブフォルダ構造**: 各メインフォルダ内の整理方針
3. **判定フロー**: 迷いやすいファイルの判断基準
4. **実装手順**: git mv、設定更新の具体的ステップ
5. **検証方法**: 移動後の動作確認手順

### **専門性の活用期待**
- **softengineer**: 技術制約・ビルド設定の観点
- **agents-manager**: プロジェクト管理・運用効率の観点
- **doc-writer**: ドキュメント・ユーザビリティの観点
- **problem-sleuth**: リスク分析・問題解決の観点
- **general-purpose**: 統合・バランスの観点
- **task-splitter**: 作業効率・分解の観点
- **rule-manager**: ルール体系・統制の観点
- **endless-tawaimonai**: 創発・新しいアイデアの観点

---

**この議題定義を基に、8名のエージェントによる多角的な提案をお願いします。**

**重要**: 各エージェントは自身の専門性を最大限活用し、他エージェントとは異なる独自の視点から解決案を提示してください。