# 文書更新抜け漏れ防止システム テストケース仕様書

**Version:** 1.0  
**Date:** 2025-08-22  
**Status:** Ready for Testing  
**Project:** 0000-00-00-project-template  

## 1. テスト概要

### 1.1 テスト目的
文書更新抜け漏れ防止システムが正常に動作し、フォルダ構造の変更を適切に検知・警告することを確認する。

### 1.2 テスト対象システム
- **Git Pre-commitフック**: `.git/hooks/pre-commit`
- **手動チェックツール**: `check-structure.bat`
- **セットアップツール**: `setup-git-hooks.ps1`
- **フォルダ構造**: CHANGE/CREATE/PROTECT/VIEW 4大区分

### 1.3 テスト環境
- **OS**: Windows
- **Git**: インストール済み
- **Project Path**: `C:\Users\user\Desktop\work\90_cc\20250821\0000-00-00-project-template`

## 2. テストケース詳細

### 2.1 Git フック動作テスト

#### TC-001: 正常構造でのコミット動作確認
**目的**: 正常なフォルダ構造でのcommit動作確認  
**前提条件**: 
- 4大フォルダ（CHANGE/CREATE/PROTECT/VIEW）が存在
- ルートに不適切なファイルがない

**手順**:
1. テストファイル作成
2. `git add` 実行
3. `git commit` 実行

**期待結果**: 
- pre-commitフックが実行される
- 警告なしでコミット成功
- "✅ フォルダ構造チェック完了: 問題ありません" メッセージ表示

#### TC-002: フォルダ欠如時の検知テスト
**目的**: 必須フォルダが不足した場合の検知確認  
**前提条件**: いずれかの必須フォルダを削除  

**手順**:
1. CHANGEフォルダを一時的にリネーム
2. テストファイル作成・追加
3. `git commit` 実行

**期待結果**: 
- 警告メッセージ表示
- "❌ 必須フォルダが見つかりません: CHANGE" 警告
- コミットは継続（警告のみ）

#### TC-003: 不適切ルートファイル検知テスト
**目的**: ルートに置くべきでないファイルの検知確認  
**前提条件**: ルートに不適切なファイルを配置  

**手順**:
1. ルートに `test.js` ファイル作成
2. `git add test.js`
3. `git commit` 実行

**期待結果**: 
- "⚠️ ルートに配置すべきでないファイルが見つかりました" 警告
- 適切な移動先の推奨表示
- コミットは継続

### 2.2 手動チェック機能テスト

#### TC-011: check-structure.bat 正常動作確認
**目的**: バッチファイルの基本動作確認  

**手順**:
1. コマンドプロンプトで `check-structure.bat` 実行

**期待結果**: 
- 全チェック項目が実行される
- 現在の構造状態が詳細表示される
- 総合評価スコア表示

#### TC-012: 詳細分析レポート生成確認
**目的**: 各フォルダの詳細情報表示確認  

**期待結果**: 
- 各フォルダのサブフォルダ一覧表示
- README.md の存在確認
- 評価スコア算出

### 2.3 文書整合性テスト

#### TC-021: 構造ガイドとの整合性確認
**目的**: 実際の構造と文書の一致確認  

**手順**:
1. `VIEW\docs\guides\UNIVERSAL_FOLDER_STRUCTURE_GUIDE.md` 読み込み
2. 実際の構造と比較
3. 不整合の検出

#### TC-022: README.md の完備性確認
**目的**: 各フォルダのREADME.md存在確認  

**期待結果**: 
- 全必須フォルダにREADME.md存在
- 内容の適切性

### 2.4 ファイル配置テスト

#### TC-031: 適切配置の正当性確認
**目的**: 現在の配置が適切であることの確認  

**テスト対象ファイル**:
- `package.json` → ROOT（適切）
- `tsconfig.json` → CHANGE/configs/typescript/（適切）
- `index.html` → CREATE/app/web/（適切）

#### TC-032: 不適切配置の検知
**目的**: 意図的な不適切配置での検知確認  

**手順**:
1. CREATE/app/web/ から index.html をルートに移動
2. チェック実行

**期待結果**: 警告表示

### 2.5 ツールファイル配置適切性評価

#### TC-041: check-structure.bat の配置評価
**現在の配置**: ルート  
**評価基準**:
- ✅ **適切**: プロジェクト全体をチェックするツール
- ✅ **アクセス性**: 開発者が簡単に実行可能
- ✅ **可視性**: プロジェクトの重要ツールとして認識されやすい

**推奨**: **現在の配置を維持**

#### TC-042: setup-git-hooks.ps1 の配置評価
**現在の配置**: ルート  
**評価基準**:
- ✅ **適切**: 初期セットアップツール
- ✅ **一時性**: セットアップ後は使用頻度低下
- ⚠️ **代替案**: `CHANGE/improvements/tools/` への移動も検討可能

**推奨**: **現在の配置を維持**（セットアップ専用ツールとしての位置づけ）

### 2.6 エラーケースハンドリング

#### TC-051: Git未初期化環境での動作
**目的**: .gitが存在しない場合のエラーハンドリング確認  

#### TC-052: 権限不足時の動作
**目的**: ファイル権限不足時の適切なエラー表示  

#### TC-053: パス文字列の異常系
**目的**: 特殊文字を含むパス名での動作確認  

### 2.7 システム警告・検知機能テスト

#### TC-061: 段階的警告レベル確認
**目的**: 問題の重要度に応じた警告レベル確認  

**レベル定義**:
- **ERROR**: システム停止レベル（.git不存在など）
- **WARNING**: 推奨事項違反（ルートファイル配置など）
- **INFO**: 参考情報（フォルダ構造詳細など）

#### TC-062: 継続的監視機能
**目的**: 複数回の構造変更での継続的な検知確認  

## 3. テスト実行計画

### 3.1 実行フェーズ
1. **Phase 1**: 基本動作確認（TC-001, TC-011）
2. **Phase 2**: 異常系テスト（TC-002, TC-003, TC-032）
3. **Phase 3**: 総合整合性テスト（TC-021, TC-022）
4. **Phase 4**: エラーハンドリング（TC-051～053）
5. **Phase 5**: 最終総合テスト

### 3.2 成功基準
- **必須**: すべての CRITICAL テストケースがPASS
- **推奨**: 全テストケースの90%以上がPASS
- **文書化**: 全テスト結果の詳細記録

### 3.3 テスト環境セットアップ
```bash
# テスト用ブランチ作成
git checkout -b test-document-leak-prevention

# バックアップ作成
cp -r . ../project-template-test-backup
```

## 4. テスト結果記録フォーマット

### 4.1 個別テストケース結果
```
TC-XXX: [テスト名]
Status: [PASS/FAIL/SKIP]
Execution Time: [実行時間]
Expected Result: [期待結果]
Actual Result: [実際の結果]
Notes: [備考]
```

### 4.2 総合評価指標
- **検知精度**: 問題を正確に検知できる割合
- **誤検知率**: 正常な状態で警告が出る割合  
- **ユーザビリティ**: 警告メッセージの分かりやすさ
- **パフォーマンス**: チェック処理の実行速度

## 5. リスク分析と対策

### 5.1 高リスク項目
- **Git環境依存**: 異なるGitバージョンでの動作差
- **パス文字列処理**: Windows特有のパス区切り文字問題
- **権限問題**: フック実行権限の環境差

### 5.2 緩和策
- 複数環境でのテスト実行
- エラーハンドリングの強化
- 詳細なログ出力機能

---

**注意**: このテスト仕様書は実際のテスト実行前に関係者のレビューを受けること。